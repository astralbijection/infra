description: Shai-hulud's science container!
config:
  security.nesting: true
  boot.autostart: false

  cloud-init.network-config: |
    #network-config
    version: 2
    ethernets:
      eth0:
        match: eth0
        dhcp4: true
        nameservers: [8.8.8.8, 8.8.4.4]

  cloud-init.user-data: |
    #cloud-config
    ssh_pwauth: false
    users:
      - name: ansible
        gecos: Ansible
        sudo: ALL=(ALL) NOPASSWD:ALL
        ssh_authorized_keys:
          - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIB/+eu2kz9jgv5NSsBoPI/Mfa12w1kSusFPsOoM8/yfr astrid@shai-hulud
      - name: astrid
        gecos: Astrid Yu
        sudo: ALL=(ALL) NOPASSWD:ALL
        ssh_authorized_keys:
          - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIB/+eu2kz9jgv5NSsBoPI/Mfa12w1kSusFPsOoM8/yfr astrid@shai-hulud
    runcmd:
      - sleep 30  # wait for network to successfully go up
      - dnf install -y ansible-core firewalld git tar tmux xz
      - systemctl enable firewalld && systemctl start firewalld


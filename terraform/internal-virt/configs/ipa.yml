cloud-init.network-config: |
  #network-config
  version: 2
  ethernets:
    eth0:
      match: eth0
      addresses: 192.168.1.8/24
      gateway4: 192.168.1.1
      nameservers: [8.8.8.8, 8.8.4.4]

cloud-init.user-data: |
  #cloud-config
  ssh_pwauth: false
  network:
    version: 2
    ethernets:
      eth0:
        match: eth0
        addresses: 192.168.1.8/24
        gateway4: 192.168.1.1
        nameservers: [8.8.8.8, 8.8.4.4]
  users:
    - name: ansible
      gecos: Ansible
      sudo: ALL=(ALL) NOPASSWD:ALL
      ssh_authorized_keys:
        - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK9VBBdNd2mdO493CU+Tg0idjTR679V1UV2I3LVwh+hH astrid@gfdesk
    - name: astrid
      gecos: Astrid Yu
      sudo: ALL=(ALL) NOPASSWD:ALL
      ssh_authorized_keys:
        - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK9VBBdNd2mdO493CU+Tg0idjTR679V1UV2I3LVwh+hH astrid@gfdesk
  packages: 
    - ansible-core
    - firewalld
    - freeipa-server
    - freeipa-server-dns
    - less
    - tmux
  runcmd:
    - systemctl enable firewalld && systemctl start firewalld
    - curl -s https://install.zerotier.com | bash

